<!DOCTYPE HTML>
<html>
<head>
<meta charset="utf-8"/>
<title> 계정 관리 </title>
<style = "css/text">
		#left{
			display: block;
			float: left;
			width:200px;
			margin: 0 0 0 0;
			text-align: right;
			}
		#right{
			display: block;
			float: right;
			width: 550px;
			text-algin: left;
			}
		#center{
			display:block;
			margin: 30px 0 0 0;
			text-align:center;
			}
		.red{
			color: red;
		}
</style>
</head>
<body id="signup">
 <script type="text/javascript">
	
	</script>
    <form>    
      <fieldset>
				<legend>관리자 정보</legend>
				<div id="left">
				<p>이름&nbsp;&nbsp;</p>
				<p>비밀번호<span class="red">*</span></p>
				<p>비밀번호 확인<span class="red">*</span></p>
				<p>이름</p>
				<p>핸드폰 번호</p>
				</div>
				<div id="right">
				<p><strong><input type = "text" id = "admin_id" value = "" disabled/></strong></p>
				<p><strong><input type = "password" id = "pw1" placholder = "****" /></strong></p>
				<p><strong><input type = "password" id = "pw2" placholder = "****" /></strong></p>
				<p><strong><input type = "text" id = "name" placceholder="" /></strong></p>
				<p><strong><input type = "tel" id = "telephone" placeholder = "000-0000-0000" pattern = "[0-9]{2,3}-[0-9]{3,4}-[0-9]{4}" />
				
				
				</div>
			</fieldset>
			
			<div id="center">
			<input type = "button" value = "저장" onclick = "save_change()"/>
			<input type = "button" value = "취소" onclick = "pageload()" />
			</div>
    </form> 
   <script type = "text/javascript">
	var localStorage = window.localStorage;
	var members_db = JSON.parse(localStorage.getItem("members"));
		var pw_change_1 = document.getElementById("pw1");
		var pw_change_2 = document.getElementById("pw2");
		var name_change = document.getElementById("name");
		var tel_change = document.getElementById("telephone");
		var get_id = document.getElementById("admin_id");
		
		get_id.value = members_db[0][0];
		pw_change_1.placeholder = members_db[0][1];
		pw_change_2.placeholder = members_db[0][1];
		name_change.placeholder = members_db[0][2];
		tel_change.placeholder = members_db[0][3];
					
				
		function save_change(){
			if(pw_change_1.value != "" && pw_change_1.value == pw_change_2.value){
				members_db[0][1] = pw_change_1.value;
			}
			else{
				alert("입력한 비밀번호가 서로 같지 않습니다.");
				return;
			}
			if(name_change.value != ""){
				members_db[0][2] = name_change.value;
			}
			if(tel_change.value != ""){
				members_db[0][3] = tel_change.value;
			}
			localStorage.setItem("members", JSON.stringify(members_db));
			alert("관리자 정보가 변경되었습니다.");
			pageload();
		}
		
		function pageload(){
			window.parent.location.reload(); //초기 화면으로 돌아가기
			window.self.close(); //iframe 창 닫기
		}
	</script>
</body>
</html>
